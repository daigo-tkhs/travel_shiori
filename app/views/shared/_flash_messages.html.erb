<%# 画面右上に固定表示 %>
<div class="fixed top-24 right-5 z-[9999] flex flex-col gap-3 pointer-events-none w-full max-w-sm">
  <% flash.each do |message_type, msg| %>
    <% if msg.present? %>
      <% 
        # 色の判定 logic
        color_class = case message_type.to_sym
                      when :notice then "bg-blue-600 text-white"
                      when :alert, :error then "bg-red-600 text-white"
                      else "bg-gray-500 text-white"
                      end
      %>
      
      <%# Stimulusコントローラー(flash)を紐付け %>
      <div data-controller="flash"
           class="flex items-center gap-3 px-6 py-4 rounded-xl shadow-2xl <%= color_class %> w-full transform transition-all duration-500 pointer-events-auto opacity-100 translate-y-0"
           role="alert"
           data-transition-enter-class="opacity-0 -translate-y-4"
           data-transition-enter-active-class="transition ease-out duration-300"
           data-transition-enter-to-class="opacity-100 translate-y-0"
           data-transition-leave-class="opacity-100 translate-y-0"
           data-transition-leave-active-class="transition ease-in duration-300"
           data-transition-leave-to-class="opacity-0 -translate-y-4">
        
        <div class="font-bold text-sm flex-1">
          <%= msg %>
        </div>

        <%# ×ボタン %>
        <button type="button" 
                data-action="click->flash#dismiss" 
                class="ml-2 text-2xl font-bold opacity-70 hover:opacity-100 p-2 leading-none cursor-pointer">
          ×
        </button>
      </div>
    <% end %>
  <% end %>
</div>