<%# 旅程編集画面: 共通ヘッダーを隠し、専用のグラデーションヘッダーを使用 %>

<div class="bg-gray-50 min-h-screen pb-32">
  
  <%# --- 1. 詳細画面から移植した専用ヘッダー --- %>
  <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-start justify-between gap-3">
        <%# 戻るボタン %>
        <%= link_to trip_path(@trip), class: "p-2 hover:bg-white/20 rounded-full transition-colors flex-shrink-0" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
          </svg>
        <% end %>

        <div class="flex-1 pt-1">
          <%# タイトル %>
          <h1 class="text-lg font-bold leading-tight mb-1">編集: <%= @trip.title %></h1>
          <div class="flex items-center gap-2 text-blue-100 text-xs">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3">
              <path fill-rule="evenodd" d="M5.75 2a.75.75 0 0 1 .75.75V4h7V2.75a.75.75 0 0 1 1.5 0V4h.25A2.75 2.75 0 0 1 18 6.75v8.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25v-8.5A2.75 2.75 0 0 1 4.75 4h.25V2.75A.75.75 0 0 1 5.75 2Zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75Z" clip-rule="evenodd" />
            </svg>
            <% if @trip.start_date %>
              <span><%= @trip.start_date.strftime("%Y/%m/%d") %></span>
              <% if @trip.end_date %>
                <span> - <%= @trip.end_date.strftime("%m/%d") %></span>
              <% end %>
            <% else %>
              <span>日付未定</span>
            <% end %>
          </div>
        </div>

        <%# 右側アクションボタン (詳細画面と同じ構成) %>
        <div class="flex items-center gap-1 flex-shrink-0">
          <%# 編集画面なので、編集ボタンの代わりに「閉じる(X)」ボタンを配置して詳細に戻れるようにします %>
          <%= link_to trip_path(@trip), class: "p-2 hover:bg-white/20 rounded-full transition-colors", title: "編集を終了" do %>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <%# --- 2. メインコンテンツエリア: max-w-2xl で幅を統一 --- %>
  <div class="max-w-2xl mx-auto px-6 mt-12">
    
    <%# 更新用カード %>
    <div class="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden">
      <div class="px-8 py-10 md:px-12 md:py-12">
        <%= render 'form', trip: @trip, btn_text: "旅程を更新する" %>
        
        <div class="mt-6">
          <%= link_to 'キャンセルして戻る', trip_path(@trip), class: "w-full block text-center py-4 rounded-full text-gray-500 font-bold bg-gray-100 hover:bg-gray-200 transition-all text-sm" %>
        </div>
      </div>
    </div>

    <%# --- 3. 危険ゾーン（削除エリア）: マージン mt-16 を確保 --- %>
    <div class="mt-16 p-8 bg-red-50 rounded-3xl border border-red-100 shadow-sm">
      <div class="flex items-center gap-3 mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 text-red-600">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
        </svg>
        <h3 class="text-red-700 font-bold text-lg">旅程の削除</h3>
      </div>
      
      <p class="text-sm text-red-600 mb-6 leading-relaxed">
        この操作は取り消せません。この旅程に関連するすべてのスポットデータが完全に消去されます。
      </p>
      
      <%= button_to 'この旅程を完全に削除する', @trip, 
          method: :delete, 
          data: { turbo_confirm: "本当に削除しますか？" },
          class: "w-full text-sm font-bold text-red-600 py-4 rounded-full border border-red-200 bg-white hover:bg-red-100 transition-all shadow-sm cursor-pointer" %>
    </div>

  </div>
</div>